# 📦 NPM Package to Nexus Uploader

A React-based web app that helps you:

1. Upload a `package.json` file
2. Generate `.tgz` tarballs using `npm pack`
3. Publish individual or all tarballs to a custom NPM-compatible registry (e.g., Nexus)

---

## 🧰 Features

- Drag and drop or select a `package.json` file to upload
- Installs dependencies and generates tarballs
- View all generated tarballs
- Publish selected or all tarballs to a registry (e.g., Nexus Repository Manager)
- Persists last used repository URL in `localStorage`

---

## 🏗 Project Structure

```

📁 src/
├── App.js
├── styles/
│   └── App.css
├── components/
│   ├── UploadPackageJsonForm.js
│   ├── GenerateTarballForm.js
│   ├── TarballPublisher.js
│   └── DisplayPackedTarballsMessage.js
└── services/
    └── api.js        ← Centralized API utility for all backend communication

````

---

## 💡 How It Works

1. **Upload package.json**  
   You upload a `package.json` file using the interface. The backend receives it, installs dependencies, and generates tarballs using `npm pack`.

2. **View Generated Tarballs**  
   The frontend lists all `.tgz` files generated by the backend.

3. **Publish to Custom Registry**  
   Using credentials stored securely in `.env`, the backend publishes one or more tarballs to your Nexus or custom registry.

---

## 🔐 Environment Variables

On the **backend**, create a `.env` file with the following:

```env
# Used by npm publish to authenticate with Nexus or any compatible registry
REPO_USERNAME=your-username
REPO_PASSWORD=your-password
REPO_EMAIL=your-email@example.com

# Optional: Default registry if not provided in frontend
NPM_REGISTRY=http://localhost:8081/repository/npm-hosted/
````

> ⚠️ Do **not** expose this `.env` file or its contents to the frontend. It should only be accessible to your backend server.

---

## 🧪 Setup Instructions

### 1. Backend Setup

```bash
cd backend
npm install
node server.js
```

Make sure your backend exposes the following routes:

* `POST /api/pack-from-packagejson`
* `GET /api/list-tarballs`
* `POST /api/publish`
* `POST /api/publish-all`

It should handle:

* `npm install`
* `npm pack`
* `npm publish` using credentials

### 2. Frontend Setup

```bash
cd frontend
npm install
npm run dev # or npm start if not using Vite
```

Open your browser at `http://localhost:5173` (or whatever port your dev server uses).

---

## ✅ Usage Flow

1. Launch both frontend and backend
2. Upload a `package.json`
3. Wait for tarball generation to complete
4. Choose a registry URL
5. Select a tarball and click **Publish**, or click **Publish All**

---

## 📸 Screenshots

*(Add screenshots of each step here if needed)*

---

## 📦 Example Nexus Registry URL

```bash
http://localhost:8081/repository/npm-hosted/
```

> Ensure your Nexus repo is set up to support hosted NPM registries and you’ve configured authentication.

---
